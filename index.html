<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SUDDEN 수치 계산기</title>
    <style>
        body {
            font-family: sans-serif;
            line-height: 1.6;
            padding: 20px;
        }
        table {
            border-collapse: collapse;
            width: 100%;
            max-width: 900px; /* Adjusted width for more text */
            margin-bottom: 30px;
            border: 1px solid #ccc;
        }
        th, td {
            border: 1px solid #ccc;
            padding: 10px;
            text-align: left;
            vertical-align: top; /* Align content to top */
        }
        th {
            background-color: #f2f2f2;
            font-weight: bold;
             /* Removed fixed width for flexibility */
        }
        .col-category { width: 50px; text-align: center; }
        .col-item { width: 180px; } /* Input item description */
        .col-input { width: 120px; } /* Input field column */
        .col-notes { /* Auto width */ }
        .col-example { /* Auto width */ }

        .input-label {
            font-weight: bold;
        }
        .input-field input[type="number"] {
            width: 95%; /* Make input fill cell */
            padding: 5px;
            border: 1px solid #ccc;
            box-sizing: border-box; /* Include padding in width */
        }
        .input-field.yellow { background-color: #FFFF99; }
        .input-field.blue   { background-color: #CCDDFF; }
        .input-field.orange { background-color: #FFCC99; }

        .output-cell {
            font-weight: bold;
            background-color: #e9e9e9;
            min-height: 30px; /* Ensure cell has height */
            vertical-align: middle;
            text-align: center;
        }
        .notes, .example {
            font-size: 0.9em;
            color: #555;
        }
        .calc-title {
            font-size: 1.5em;
            margin-bottom: 15px;
            font-weight: bold;
        }
        .section-label { /* For Input/Output labels */
             writing-mode: vertical-rl; /* Optional: Rotate like image */
             text-align: center;
             font-weight: bold;
             background-color: #f8f8f8;
             padding: 5px;
             vertical-align: middle;
        }
        /* Add some spacing between rows */
        tr {
             min-height: 50px; /* Give rows some breathing room */
        }
        .overall-goal { /* Style for the goal description */
            font-weight: bold;
            margin-bottom: 5px;
            display: block; /* Ensure it's on its own line */
        }
    </style>
</head>
<body>

    <div class="calc-title">서든 계산기 1</div>
    <table>
        <thead>
            <tr>
                <th class="col-category" colspan="2">구분</th>
                <th class="col-input">입력/결과</th>
                <th class="col-notes">참고</th>
                <th class="col-example">사용예시</th>
            </tr>
        </thead>
        <tbody>
            <!-- General Description Row (Optional but helps structure) -->
             <tr>
                <td colspan="3" style="border: none;"></td>
                <td class="notes" style="font-weight:bold;">
                    이 계산기는 최고 BPM, SUDDEN을 걸고자 하는 구간의 BPM, LIFT 수치를 바탕으로 SUDDEN 수치를 계산해 주는 계산기입니다. SUDDEN을 걸지 않았을 때와 노트가 화면에 나타나는 시간이 비슷하게 되도록 SUDDEN 수치를 구해줍니다. 하지만, 체감상 적정 SUDDEN 수치와 괴리가 있는 편이니 본래 사용하는 SUDDEN 수치가 있다면 밑의 계산기를 이용하는 것을 추천합니다.
                </td>
                 <td class="example">
                    <span class="overall-goal">LIFT 수치가 20일 때의 설상가단 EX의 SUDDEN 수치를 구하고자 합니다.</span>
                 </td>
             </tr>

            <!-- Calculator 1 Inputs -->
            <tr>
                <td rowspan="3" class="section-label">입력</td>
                <td class="input-label col-item">해당 곡의 최고 BPM</td>
                <td class="input-field yellow col-input">
                    <input type="number" id="maxBpm" oninput="calculateSudden1()">
                </td>
                <td class="notes col-notes">
                    해당 곡의 최고 BPM 혹은 SUDDEN을 걸지 않을 구간의 BPM을 입력합니다. 이 항목에 해당 곡의 배속을 입력해도 무관하나, 이 항목에 BPM 대신 배속을 입력했다면 밑의 항목에도 배속을 입력해야 합니다.
                </td>
                <td class="example col-example">
                    설상가단의 최고 BPM은 180이므로 180을 입력합니다(혹은, 720 배속을 보는 유저라면 720을 입력해도 무관합니다. 단, 이 경우에는 밑의 항목에도 배속을 입력해야 합니다.)
                </td>
            </tr>
            <tr>
                <td class="input-label col-item">SUDDEN을 걸고자 하는 구간의 BPM</td>
                <td class="input-field blue col-input">
                    <input type="number" id="suddenBpm" oninput="calculateSudden1()">
                </td>
                 <td class="notes col-notes">
                     SUDDEN을 걸고자 하는 구간의 BPM을 입력합니다(대부분의 경우 최저 BPM). 이 항목에 해당 곡의 배속을 입력해도 무관하나, 이 항목에 BPM 대신 배속을 입력했다면 밑의 항목에도 배속을 입력해야 합니다.
                 </td>
                 <td class="example col-example">
                    설상가단의 저속 구간의 BPM은 105이므로 105를 입력합니다(위에서 720을 입력했다면 이 항목에 105 대신 420을 입력해야 합니다).
                </td>
            </tr>
            <tr>
                <td class="input-label col-item">LIFT 수치</td>
                <td class="input-field orange col-input">
                    <input type="number" id="liftValue1" oninput="calculateSudden1()">
                </td>
                 <td class="notes col-notes">
                    LIFT 수치를 입력합니다.
                 </td>
                 <td class="example col-example">
                    LIFT 수치가 20이므로, 20을 입력합니다.
                 </td>
            </tr>
            <!-- Calculator 1 Output -->
            <tr>
                <td class="section-label">출력</td>
                <td class="input-label col-item">적정 SUDDEN 수치<br>(BPM을 이용하여 계산한 결과)</td>
                <td id="result1" class="output-cell col-input"></td>
                <td class="notes col-notes">계산 결과</td>
                 <td class="example col-example">
                    계산 결과로 -95가 나왔다면 올바르게 사용한 것입니다. SUDDEN 수치를 -95에 맞추고 게임을 플레이하면 됩니다.
                 </td>
            </tr>
        </tbody>
    </table>

    <hr style="margin: 40px 0;">

    <div class="calc-title">서든 계산기 2</div>
    <table>
         <thead>
            <tr>
                <th class="col-category" colspan="2">구분</th>
                <th class="col-input">입력/결과</th>
                <th class="col-notes">참고</th>
                <th class="col-example">사용예시</th>
            </tr>
        </thead>
        <tbody>
             <!-- General Description Row (Optional) -->
             <tr>
                <td colspan="3" style="border: none;"></td>
                 <td class="notes" style="font-weight:bold;">
                    이 계산기는 LIFT 수치가 0일 때(LIFT 옵션이 OFF일 때)의 SUDDEN 수치, 현재 사용중인 LIFT 수치를 바탕으로 적정 SUDDEN 수치를 계산해 주는 계산기입니다.
                 </td>
                 <td class="example">
                     <span class="overall-goal">LIFT를 사용하지 않았을 때 설상가단 EX의 SUDDEN 수치를 -95로 맞추고 플레이하는 유저가 LIFT 수치가 20일 때의 설상가단 EX의 SUDDEN 수치를 구하고자 합니다.</span>
                 </td>
             </tr>
            <!-- Calculator 2 Inputs -->
             <tr>
                <td rowspan="2" class="section-label">입력</td>
                <td class="input-label col-item">LIFT 수치가 0일 때 사용했던 SUDDEN 수치</td>
                <td class="input-field yellow col-input">
                    <input type="number" id="suddenAtLift0" oninput="calculateSudden2()">
                </td>
                 <td class="notes col-notes">
                    LIFT 수치가 0일 때 사용했던 SUDDEN 수치를 입력합니다. 이때, 항상 음수값만을 입력해야 합니다.
                </td>
                <td class="example col-example">
                   LIFT를 사용하지 않았을 때의 SUDDEN 수치가 -95였으므로, -95를 입력합니다.
                </td>
            </tr>
            <tr>
                <td class="input-label col-item">사용하고 있는 LIFT 수치</td>
                <td class="input-field blue col-input">
                    <input type="number" id="liftValue2" oninput="calculateSudden2()">
                </td>
                 <td class="notes col-notes">
                    현재 사용중인 LIFT 수치를 입력합니다.
                 </td>
                <td class="example col-example">
                   LIFT 수치가 20이므로, 20을 입력합니다.
                </td>
            </tr>
            <!-- Calculator 2 Output -->
            <tr>
                 <td class="section-label">출력</td>
                <td class="input-label col-item">적정 SUDDEN 수치<br>(LIFT 수치가 0일 때의 SUDDEN<br>수치를 이용하여 계산한 결과)</td>
                <td id="result2" class="output-cell col-input"></td>
                <td class="notes col-notes">계산 결과</td>
                 <td class="example col-example">
                    계산 결과로 -102.8125가 나왔다면 올바르게 사용한 것입니다. SUDDEN 수치를 -103으로 맞추고 게임을 플레이하면 됩니다. (보통 소수점 버림)
                 </td>
            </tr>
        </tbody>
    </table>

    <script>
        function calculateSudden1() {
            const maxBpm = parseFloat(document.getElementById('maxBpm').value);
            const suddenBpm = parseFloat(document.getElementById('suddenBpm').value);
            const liftValue1 = parseFloat(document.getElementById('liftValue1').value);
            const resultCell = document.getElementById('result1');

            if (isNaN(maxBpm) || isNaN(suddenBpm) || isNaN(liftValue1)) {
                resultCell.textContent = '';
                return;
            }
            if (maxBpm === 0) {
                resultCell.textContent = '#DIV/0!';
                return;
            }
            // Formula: =(1-C4/C3)*(320-C5)-220
            const result = (1 - suddenBpm / maxBpm) * (320 - liftValue1) - 220;
            resultCell.textContent = result.toFixed(4);
        }

        function calculateSudden2() {
            const suddenAtLift0 = parseFloat(document.getElementById('suddenAtLift0').value);
            const liftValue2 = parseFloat(document.getElementById('liftValue2').value);
            const resultCell = document.getElementById('result2');

            if (isNaN(suddenAtLift0) || isNaN(liftValue2)) {
                resultCell.textContent = '';
                return;
            }
            // Formula: =(C9+220)*(320-C10)/320-220
            const result = (suddenAtLift0 + 220) * (320 - liftValue2) / 320 - 220;
            resultCell.textContent = result.toFixed(4);
        }

    </script>

</body>
</html>
