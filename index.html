<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SUDDEN 수치 계산기</title>
    <style>
        body {
            font-family: sans-serif;
            line-height: 1.6;
            padding: 20px;
        }
        table {
            border-collapse: collapse;
            width: 100%;
            max-width: 800px; /* Limit max width */
            margin-bottom: 30px;
            border: 1px solid #ccc;
        }
        th, td {
            border: 1px solid #ccc;
            padding: 10px;
            text-align: left;
            vertical-align: top; /* Align content to top */
        }
        th {
            background-color: #f2f2f2;
            font-weight: bold;
            width: 150px; /* Fixed width for labels */
        }
        .input-label {
            font-weight: bold;
        }
        .input-field input[type="number"] {
            width: 95%; /* Make input fill cell */
            padding: 5px;
            border: 1px solid #ccc;
            box-sizing: border-box; /* Include padding in width */
        }
        .input-field.yellow { background-color: #FFFF99; }
        .input-field.blue   { background-color: #CCDDFF; }
        .input-field.orange { background-color: #FFCC99; }

        .output-cell {
            font-weight: bold;
            background-color: #e9e9e9;
            min-height: 30px; /* Ensure cell has height */
            vertical-align: middle;
        }
        .notes {
            font-size: 0.9em;
            color: #555;
        }
        .calc-title {
            font-size: 1.5em;
            margin-bottom: 15px;
            font-weight: bold;
        }
        .section-label { /* For Input/Output labels */
             writing-mode: vertical-rl; /* Optional: Rotate like image */
             text-align: center;
             font-weight: bold;
             background-color: #f8f8f8;
             padding: 5px;
        }
        /* Add some spacing between rows */
        tr {
             height: 50px; /* Give rows some breathing room */
        }
    </style>
</head>
<body>

    <div class="calc-title">서든 계산기 1</div>
    <table>
        <thead>
            <tr>
                <th colspan="2">구분</th>
                <th>입력/결과</th>
                <th>참고</th>
                <th>사용예시</th>
            </tr>
        </thead>
        <tbody>
            <!-- Calculator 1 Inputs -->
            <tr>
                <td rowspan="3" class="section-label">입력</td>
                <td class="input-label">해당 곡의 최고 BPM</td>
                <td class="input-field yellow">
                    <input type="number" id="maxBpm" oninput="calculateSudden1()">
                </td>
                <td rowspan="3" class="notes">
                    이 계산기는 최고 BPM, SUDDEN을 걸고자 하는 구간의 BPM, LIFT 수치를 바탕으로 SUDDEN 수치를 계산해 주는 계산기입니다.
                    SUDDEN을 걸지 않았을 때와 노트가 화면에 나타나는 시간이 비슷하게 되도록 SUDDEN 수치를 구해줍니다. 하지만, 체감상 적정 SUDDEN 수치와 괴리가 있는 편이니 본래 사용하는 SUDDEN 수치가 있다면 밑의 계산기를 이용하는 것을 추천합니다.
                </td>
                <td class="notes">
                    설상가단의 최고 BPM은 180이므로 180을 입력합니다(혹은, 720 배속을 보는 유저라면 720을 입력해도 무관합니다. 단, 이 경우에는 밑의 항목에도 배속을 입력해야 합니다.)
                </td>
            </tr>
            <tr>
                <td class="input-label">SUDDEN을 걸고자 하는 구간의 BPM</td>
                <td class="input-field blue">
                    <input type="number" id="suddenBpm" oninput="calculateSudden1()">
                </td>
                 <td class="notes">
                    설상가단의 저속 구간의 BPM은 105이므로 105를 입력합니다(위에서 720을 입력했다면 이 항목에 105 대신 420을 입력해야 합니다).
                </td>
            </tr>
            <tr>
                <td class="input-label">LIFT 수치</td>
                <td class="input-field orange">
                    <input type="number" id="liftValue1" oninput="calculateSudden1()">
                </td>
                 <td class="notes">
                    LIFT 수치가 20이므로, 20을 입력합니다.
                 </td>
            </tr>
            <!-- Calculator 1 Output -->
            <tr>
                <td class="section-label">출력</td>
                <td class="input-label">적정 SUDDEN 수치<br>(BPM을 이용하여 계산한 결과)</td>
                <td id="result1" class="output-cell"></td>
                <td class="notes">계산 결과</td>
                 <td class="notes">
                    계산 결과로 -95가 나왔다면 올바르게 사용한 것입니다. SUDDEN 수치를 -95에 맞추고 게임을 플레이하면 됩니다.
                 </td>
            </tr>
        </tbody>
    </table>

    <hr style="margin: 40px 0;">

    <div class="calc-title">서든 계산기 2</div>
    <table>
         <thead>
            <tr>
                <th colspan="2">구분</th>
                <th>입력/결과</th>
                <th>참고</th>
                <th>사용예시</th>
            </tr>
        </thead>
        <tbody>
            <!-- Calculator 2 Inputs -->
             <tr>
                <td rowspan="2" class="section-label">입력</td>
                <td class="input-label">LIFT 수치가 0일 때 사용했던 SUDDEN 수치</td>
                <td class="input-field yellow">
                    <input type="number" id="suddenAtLift0" oninput="calculateSudden2()">
                </td>
                 <td rowspan="2" class="notes">
                    이 계산기는 LIFT 수치가 0일 때(LIFT 옵션이 OFF일 때)의 SUDDEN 수치, 현재 사용중인 LIFT 수치를 바탕으로 적정 SUDDEN 수치를 계산해 주는 계산기입니다.
                </td>
                <td class="notes">
                   LIFT를 사용하지 않았을 때의 SUDDEN 수치가 -95였으므로, -95를 입력합니다. (항상 음수값을 입력해야 합니다)
                </td>
            </tr>
            <tr>
                <td class="input-label">사용하고 있는 LIFT 수치</td>
                <td class="input-field blue">
                    <input type="number" id="liftValue2" oninput="calculateSudden2()">
                </td>
                <td class="notes">
                   LIFT 수치가 20이므로, 20을 입력합니다.
                </td>
            </tr>
            <!-- Calculator 2 Output -->
            <tr>
                 <td class="section-label">출력</td>
                <td class="input-label">적정 SUDDEN 수치<br>(LIFT 수치가 0일 때의 SUDDEN<br>수치를 이용하여 계산한 결과)</td>
                <td id="result2" class="output-cell"></td>
                <td class="notes">계산 결과</td>
                 <td class="notes">
                    계산 결과로 -102.8125가 나왔다면 올바르게 사용한 것입니다. SUDDEN 수치를 -103으로 맞추고 게임을 플레이하면 됩니다. (보통 소수점 버림)
                 </td>
            </tr>
        </tbody>
    </table>

    <script>
        function calculateSudden1() {
            const maxBpm = parseFloat(document.getElementById('maxBpm').value);
            const suddenBpm = parseFloat(document.getElementById('suddenBpm').value);
            const liftValue1 = parseFloat(document.getElementById('liftValue1').value);
            const resultCell = document.getElementById('result1');

            // Check if all inputs are valid numbers
            if (isNaN(maxBpm) || isNaN(suddenBpm) || isNaN(liftValue1)) {
                resultCell.textContent = ''; // Clear result if any input is not a number
                return;
            }

            // Check for division by zero
            if (maxBpm === 0) {
                resultCell.textContent = '#DIV/0!';
                return;
            }

            // Formula: =(1-C4/C3)*(320-C5)-220
            // C3 = maxBpm, C4 = suddenBpm, C5 = liftValue1
            const result = (1 - suddenBpm / maxBpm) * (320 - liftValue1) - 220;

            // Display result (maybe round?)
            resultCell.textContent = result.toFixed(4); // Display with 4 decimal places like example
        }

        function calculateSudden2() {
            const suddenAtLift0 = parseFloat(document.getElementById('suddenAtLift0').value);
            const liftValue2 = parseFloat(document.getElementById('liftValue2').value);
            const resultCell = document.getElementById('result2');

            // Check if inputs are valid numbers
            if (isNaN(suddenAtLift0) || isNaN(liftValue2)) {
                resultCell.textContent = ''; // Clear result if any input is not a number
                return;
            }

            // Formula: =(C9+220)*(320-C10)/320-220
            // C9 = suddenAtLift0, C10 = liftValue2
            const result = (suddenAtLift0 + 220) * (320 - liftValue2) / 320 - 220;

            // Display result
            resultCell.textContent = result.toFixed(4); // Display with 4 decimal places like example
        }

        // Optional: Calculate on page load if there are default values
        // window.onload = function() {
        //     calculateSudden1();
        //     calculateSudden2();
        // };
    </script>

</body>
</html>
